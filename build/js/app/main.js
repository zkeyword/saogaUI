/*!art-template - Template Engine | http://aui.github.com/artTemplate/*/

/**
 * @license RequireJS i18n 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/i18n for details
 */

define("core/saogaUI",["jquery"],function(e){return function(){String.prototype.getLength=function(){return this.replace(/[^\x00-\xff]/g,"en").length},String.prototype.trim=function(){return this.replace(/^[\s\xa0\u3000]+|[\u3000\xa0\s]+$/g,"")},String.prototype.toUnicode=function(){return escape(this.toLocaleLowerCase().replace(/%u/gi,"\\"))},String.prototype.unicodeTo=function(){return unescape(this.toLocaleLowerCase().replace(/%u/gi,"\\"))};var e=window.saogaUI||{};e={_INSTALL:function(){window.saogaUI=e},base:{},ui:{}},e._INSTALL()}(window),saogaUI.base={isArray:function(e){return e?jQuery.isArray(e):!1},isObject:function(e){return e?Object.prototype.toString.call(e)==="[object Object]":!1},isFunction:function(e){return e?Object.prototype.toString.call(e)==="[object Function]":!1}},saogaUI.ui={zIndex:function(){return 9999+e(".l-ui").length},wrap:function(){e("#l-ui-wrap").length||e("body").append('<div id="l-ui-wrap"><!--[if lte IE 6.5]><iframe src="javascript:false;" style="width:0;height:0;"></iframe><![endif]--></div>')},lock:function(){var t=e("body"),n=t.width(),r=e(document).height();e(".l-ui-lock").length?e(".l-ui-lock").show():t.append('<div class="l-ui-lock"></div>').find(".l-ui-lock").css({width:n,height:r,filter:"Alpha(opacity=20)"}),e(".l-ui").addClass("l-ui-mask")},unlock:function(){e(".l-ui-lock").hide()},mousePosition:function(e){var e=e||window.event,t=e.pageX||e.clientX+document.body.scrollLeft,n=e.pageY||e.clientY+document.body.scrollTop;return{positionX:t,positionY:n}},Widescreen:function(){return screen.width>=1210}()},saogaUI}),!function(){function e(e){return e.replace(b,"").replace(w,",").replace(E,"").replace(S,"").replace(x,"").split(/^$|,+/)}function t(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function n(n,r){function i(e){return h+=e.split(/\n/).length-1,l&&(e=e.replace(/[\n\r\t\s]+/g," ").replace(/<!--.*?-->/g,"")),e&&(e=y[1]+t(e)+y[2]+"\n"),e}function s(t){var n=h;if(f?t=f(t,r):o&&(t=t.replace(/\n/g,function(){return h++,"$line="+h+";"})),0===t.indexOf("=")){var i=c&&!/^=[=#]/.test(t);if(t=t.replace(/^=[=#]?|[\s;]*$/g,""),i){var s=t.replace(/\s*\([^\)]+\)/,"");p[s]||/^(include|print)$/.test(s)||(t="$escape("+t+")")}else t="$string("+t+")";t=y[1]+t+y[2]}return o&&(t="$line="+n+";"+t),g(e(t),function(e){if(e&&!v[e]){var t;t="print"===e?w:"include"===e?E:p[e]?"$utils."+e:d[e]?"$helpers."+e:"$data."+e,S+=e+"="+t+",",v[e]=!0}}),t+"\n"}var o=r.debug,u=r.openTag,a=r.closeTag,f=r.parser,l=r.compress,c=r.escape,h=1,v={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},m="".trim,y=m?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],b=m?"$out+=text;return $out;":"$out.push(text);",w="function(){var text=''.concat.apply('',arguments);"+b+"}",E="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+b+"}",S="var $utils=this,$helpers=$utils.$helpers,"+(o?"$line=0,":""),x=y[0],T="return new String("+y[3]+");";g(n.split(u),function(e){e=e.split(a);var t=e[0],n=e[1];1===e.length?x+=i(t):(x+=s(t),n&&(x+=i(n)))});var N=S+x+T;o&&(N="try{"+N+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+t(n)+".split(/\\n/)[$line-1].replace(/^[\\s\\t]+/,'')};}");try{var C=new Function("$data","$filename",N);return C.prototype=p,C}catch(k){throw k.temp="function anonymous($data,$filename) {"+N+"}",k}}var r=function(e,t){return"string"==typeof t?m(t,{filename:e}):o(e,t)};r.version="3.0.0",r.config=function(e,t){i[e]=t};var i=r.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},s=r.cache={};r.render=function(e,t){return m(e,t)};var o=r.renderFile=function(e,t){var n=r.get(e)||v({filename:e,name:"Render Error",message:"Template not found"});return t?n(t):n};r.get=function(e){var t;if(s[e])t=s[e];else if("object"==typeof document){var n=document.getElementById(e);if(n){var r=(n.value||n.innerHTML).replace(/^\s*|\s*$/g,"");t=m(r,{filename:e})}}return t};var u=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?u(e.call(e)):""),e},a={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},f=function(e){return a[e]},l=function(e){return u(e).replace(/&(?![\w#]+;)|[<>"']/g,f)},c=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},h=function(e,t){var n,r;if(c(e))for(n=0,r=e.length;r>n;n++)t.call(e,e[n],n,e);else for(n in e)t.call(e,e[n],n)},p=r.utils={$helpers:{},$include:o,$string:u,$escape:l,$each:h};r.helper=function(e,t){d[e]=t};var d=r.helpers=p.$helpers;r.onerror=function(e){var t="Template Error\n\n";for(var n in e)t+="<"+n+">\n"+e[n]+"\n\n";"object"==typeof console&&console.error(t)};var v=function(e){return r.onerror(e),function(){return"{Template Error}"}},m=r.compile=function(e,t){function r(n){try{return new a(n,u)+""}catch(r){return t.debug?v(r)():(t.debug=!0,m(e,t)(n))}}t=t||{};for(var o in i)void 0===t[o]&&(t[o]=i[o]);var u=t.filename;try{var a=n(e,t)}catch(f){return f.filename=u||"anonymous",f.name="Syntax Error",v(f)}return r.prototype=a.prototype,r.toString=function(){return a.toString()},u&&t.cache&&(s[u]=r),r},g=p.$each,y="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",b=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g,w=/[^\w$]+/g,E=new RegExp(["\\b"+y.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),S=/^\d[^,]*|,\d[^,]*/g,x=/^,+|,+$/g;i.openTag="{{",i.closeTag="}}";var T=function(e,t){var n=t.split(":"),r=n.shift(),i=n.join(":")||"";return i&&(i=", "+i),"$helpers."+r+"("+e+i+")"};i.parser=function(e,t){e=e.replace(/^\s/,"");var n=e.split(" "),i=n.shift(),s=n.join(" ");switch(i){case"if":e="if("+s+"){";break;case"else":n="if"===n.shift()?" if("+n.join(" ")+")":"",e="}else"+n+"{";break;case"/if":e="}";break;case"each":var o=n[0]||"$data",u=n[1]||"as",a=n[2]||"$value",f=n[3]||"$index",l=a+","+f;"as"!==u&&(o="[]"),e="$each("+o+",function("+l+"){";break;case"/each":e="});";break;case"echo":e="print("+s+");";break;case"print":case"include":e=i+"("+n.join(",")+");";break;default:if(-1!==s.indexOf("|")){var c=t.escape;0===e.indexOf("#")&&(e=e.substr(1),c=!1);for(var h=0,p=e.split("|"),d=p.length,v=c?"$escape":"$string",m=v+"("+p[h++]+")";d>h;h++)m=T(m,p[h]);e="=#"+m}else e=r.helpers[i]?"=#"+i+"("+n.join(",")+");":"="+e}return e},"function"==typeof define?define("template",[],function(){return r}):"undefined"!=typeof exports?module.exports=r:this.template=r}(),define("core/drag",["core/saogaUI"],function(e){var t=function(e){function o(e){var e=window.event||e,t=r.css("top")=="auto"?0:r.css("top"),n=r.css("left")=="auto"?0:r.css("left");r.css({top:parseInt(t)+(e.clientY-s.y),left:parseInt(n)+(e.clientX-s.x)}),s.x=e.clientX,s.y=e.clientY}var t=e||{};if(!t.dragItem)return!1;var n=$("body").find(t.dragItem),r=$("body").find(t.dragWrap),i=parent.document||document,s={x:0,y:0};n.mousedown(function(e){var e=window.event||e;s.x=e.clientX,s.y=e.clientY,$(i).bind("mousemove",o),e.preventDefault()}),$(i).mouseup(function(e){$(i).unbind("mousemove",o)})};return e.drag=t,t}),function(){function t(e,t,n,r,i,s){t[e]&&(n.push(e),(t[e]===!0||t[e]===1)&&r.push(i+e+"/"+s))}function n(e,t,n,r,i){var s=r+t+"/"+i;require._fileExists(e.toUrl(s+".js"))&&n.push(s)}function r(e,t,n){var i;for(i in t)t.hasOwnProperty(i)&&(!e.hasOwnProperty(i)||n)?e[i]=t[i]:typeof t[i]=="object"&&(!e[i]&&t[i]&&(e[i]={}),r(e[i],t[i],n))}var e=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var s=i.config?i.config():{};return{version:"2.0.4",load:function(i,o,u,a){a=a||{},a.locale&&(s.locale=a.locale);var f,l=e.exec(i),c=l[1],h=l[4],p=l[5],d=h.split("-"),v=[],m={},g,y,b="";l[5]?(c=l[1],f=c+p):(f=i,p=l[4],h=s.locale,h||(h=s.locale=typeof navigator=="undefined"?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),d=h.split("-"));if(a.isBuild){v.push(f),n(o,"root",v,c,p);for(g=0;g<d.length;g++)y=d[g],b+=(b?"-":"")+y,n(o,b,v,c,p);o(v,function(){u()})}else o([f],function(e){var n=[],i;t("root",e,n,v,c,p);for(g=0;g<d.length;g++)i=d[g],b+=(b?"-":"")+i,t(b,e,n,v,c,p);o(v,function(){var t,i,s;for(t=n.length-1;t>-1&&n[t];t--){s=n[t],i=e[s];if(i===!0||i===1)i=o(c+s+"/"+p);r(m,i)}u(m)})})}}})}(),define("core/nls/str",{root:{close:"关闭",alert:"提示？",confirm:"确认？",error:"错误"},en:!0}),define("core/dialog",["core/saogaUI","core/drag","i18n!core/nls/str"],function(e,t,n){var r={init:function(n){var r=n||{},i=r.title||"",s=r.text||"",o=r.btns||"",u=r.type||"",a=r.top,f=r.left,l=r.ok||"",c=r.no||"",h=r.width||200,p=r.height||50,d=r.id||"l-dialog-"+(new Date).valueOf(),v="l-dialog-title"+(new Date).valueOf(),m=r.isMask===undefined||r.isMask,g=r.isMaskClose===undefined||r.isMaskClose,y=r.allowClose===undefined||r.allowClose,b=r.allowEscClose===undefined||r.allowEscClose,w=r.isDrag===undefined||r.isDrag,E="";E+='<div class="l-ui l-dialog-wrap" id="'+d+'">',E+='	<table class="l-dialog-table">',E+='		<tr><td colspan="3" class="l-dialog-border l-dialog-border-top">&nbsp;</td></tr>',E+="		<tr>",E+='			<td class="l-dialog-border l-dialog-border-left">&nbsp;</td>',E+='			<td class="l-dialog-main"><div class="l-dialog-content" style="width:'+h+"px;height:"+p+'px">'+s+"</div></td>",E+='			<td class="l-dialog-border l-dialog-border-right">&nbsp;</td>',E+="		</tr>",E+='		<tr><td colspan="3" class="l-dialog-border l-dialog-border-bottom">&nbsp;</td></tr>',E+="	</table>",E+="</div>",e.ui.wrap(),$("#l-ui-wrap").prepend(E);var S=e.ui.zIndex(),x=$("#"+d).css({"z-index":S}),T=x.find(".l-dialog-main"),N=x.find(".l-dialog-content");i&&T.prepend('<div class="l-dialog-title" id="'+v+'">'+i+"</div>"),u&&T.find(".l-dialog-content").addClass("l-dialog-"+u);var C=0,k=T.append('<div class="ui-floatCenter l-dialog-btnWrap"><div class="ui-sl-floatCenter"></div></div>').find(".ui-floatCenter"),L=T.find(".ui-sl-floatCenter"),A=k.height();if(o)$.each(o,function(t,n){L.append('<a href="javascript:;" class="'+(n.cls?"ui-btn ui-btnMain ui-floatCenter-item "+n.cls:"ui-btn ui-btnMain ui-floatCenter-item")+'"><span>'+n.text+"</span></a>"),n.onclick&&L.find("a").eq(t).click(function(){n.onclick(t,n),e.ui.dialog.close(d)})});else switch(u){case"alert":L.append('<a href="javascript:;" class="ui-btn ui-btnMain ui-floatCenter-item l-dialog-ok"><span>确定</span></a>'),L.find(".l-dialog-ok").click(function(){e.base.isFunction(l)&&l(),e.ui.dialog.close(d)});break;case"confirm":L.append('<a href="javascript:;" class="ui-btn ui-btnMain ui-floatCenter-item l-dialog-ok"><span>确定</span></a><a href="javascript:;" class="ui-btn ui-btnMain ui-btnMain-cancel ui-floatCenter-item l-dialog-no"><span>取消</span></a>'),L.find(".l-dialog-ok").click(function(){e.base.isFunction(l)&&l(),e.ui.dialog.close(d)}),L.find(".l-dialog-no").click(function(){e.base.isFunction(c)&&c(),e.ui.dialog.close(d)});break;case"error":L.append('<a href="javascript:;" class="ui-btn ui-btnMain ui-btnMain-cancel ui-floatCenter-item l-dialog-no"><span>取消</span></a>'),L.find(".l-dialog-no").click(function(){e.base.isFunction(c)&&c(),e.ui.dialog.close(d)})}var O=$(window),a=a||O.scrollTop()+O.height()/2-x.height()/2,f=f||(O.width()-x.width())/2;x.css({top:a,left:f}),m&&e.ui.lock(),w&&t({dragItem:"#"+v,dragWrap:"#"+d});if(y){var M=T.prepend('<div class="l-dialog-close">x</div>').find(".l-dialog-close");M.click(function(){e.ui.dialog.close(d)});if(b){var _=function(t){t=t||event;var n=t.which||event.keyCode;n===27&&e.ui.dialog.close(d)};document.attachEvent?document.attachEvent("onkeydown",_):document.addEventListener("keydown",_,!0)}}},close:function(t){t?$("#"+t).remove():$(".l-dialog-wrap").remove(),$(".l-ui-mask").length||e.ui.unlock()},alert:function(e){var t=e||{},r=t.title||n.alert,i=t.text||"",s=t.ok||"";this.init({title:r,text:i,type:"alert",ok:s})},confirm:function(e){var t=e||{},r=t.title||n.confirm,i=t.text||"",s=t.ok||"",o=t.no||"";this.init({title:r,text:i,type:"confirm",ok:s,no:o})},error:function(e){var t=e||{},r=t.title||"",i=t.text||n.error,s=t.no||"";this.init({title:r,text:i,type:"error",no:s})},prompt:function(t){function g(){e.ui.dialog.close(r),l&&typeof l=="function"&&l()}var n=t||{},r=n.id||"l-dialog-"+(new Date).valueOf(),i=n.top,s=n.left,o=n.cls||"",u=n.text||"",a=n.isMask||!0,f=n.showTime||2e3,l=n.endFn||"",c=n.width||"",h=n.height||"auto";e.ui.wrap();var p="";p+='<div class="l-ui l-dialog-wrap" id="'+r+'">',p+='	<div class="l-dialog-prompt">'+u+"</div>",p+="</div>",$("#l-ui-wrap").prepend(p);var d=e.ui.zIndex(),v=$("#"+r).css({width:c,height:h,"z-index":d}),m=$(window),i=i||m.scrollTop()+m.height()/2-v.height()/2,s=s||(m.width()-v.width())/2;v.css({top:i,left:s}),a&&e.ui.lock(),setTimeout(g,f)}};return r}),define("app/main",["require","core/saogaUI","template","core/drag","core/dialog"],function(e){var t=e("core/saogaUI"),n=e("template"),r=e("core/drag"),i=e("core/dialog");return t.ui.drag=r,t.ui.dialog=i,t.template=n,t});